<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Alien Invaders!</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <style>
        canvas {
            border: 1px solid #d3d3d3;
            background-color: #f1f1f1;
        }
    </style>
</head>
<body onload="startGame()">
<script>

    var playerGamePiece;


    function startGame(){
        myGameArea.start();
        playerGamePiece = new gameComponent(30,30, "black", 480/2-15, 600)
        document.addEventListener("keydown", (event) =>{
            inputDirection(event.key);
        })
    }

    function updateGame(){
        myGameArea.clear();
        playerGamePiece.newPos();
        playerGamePiece.update();

    }

    var myGameArea = {
        canvas : document.createElement("canvas"),
        start : function() {
            this.canvas.width = 480;
            this.canvas.height = 720;
            this.context = this.canvas.getContext("2d");
            document.body.insertBefore(this.canvas, document.body.childNodes[0]);
            this.interval = setInterval(updateGame, 20)
        },
        clear:function (){
            this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)
        }
    }

    function gameComponent(width, height, color, x, y){
        this.width = width;
        this.height = height;
        this.x = x;
        this.y = y;
        this.speedX = 0;
        this.speedY = 0;
        this.update = function(){
            ctx = myGameArea.context;
            ctx.fillStyle = color;
            ctx.fillRect(this.x, this.y, this.width, this.height)
        }
        this.newPos = function(){
            this.x += this.speedX;
            this.y += this.speedY;
        }

    }

    function inputDirection(key){
        switch (key){
            case "w":            //87 = W
                playerGamePiece.speedY -=1;
                console.log(`w`);
                console.log(this.speedY);
                break;
            case "s":            //83 = S
                playerGamePiece.speedY +=1;
                console.log(`s`);
                break;
            case "a":
                playerGamePiece.speedX -=1;
                console.log(`a`);
                break;
            case "d":
                playerGamePiece.speedX +=1;
                console.log(`d`);
                break;

        }
    }

</script>
</body>
</html>

